<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#21808d">
    <title>Vitanuova vs TFR</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: #f0f0f0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            padding: 8px;
            font-size: 16px;
        }
        .header {
            background: #21808d;
            color: white;
            padding: 18px 12px;
            border-radius: 12px;
            margin-bottom: 14px;
            text-align: center;
        }
        .header h1 {
            font-size: 24px;
            margin-bottom: 4px;
            font-weight: 700;
        }
        .header p {
            font-size: 14px;
            opacity: 0.95;
        }
        .tabs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 16px;
        }
        .tab-btn {
            background: white;
            border: 2px solid #e0e0e0;
            color: #21808d;
            padding: 12px 10px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
        }
        .tab-btn.active {
            background: #21808d;
            color: white;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .inputs-section {
            background: white;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 16px;
            border: 2px solid #e0e0e0;
        }
        .input-group {
            margin-bottom: 14px;
        }
        .input-label {
            font-size: 13px;
            font-weight: 600;
            color: #21808d;
            margin-bottom: 6px;
            display: block;
        }
        .input-wrapper {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        input[type="number"], input[type="range"] {
            flex: 1;
            padding: 12px 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
        }
        .input-unit {
            font-size: 14px;
            font-weight: 600;
            color: #999;
            min-width: 40px;
        }
        .info-box {
            background: #e0f7fa;
            border-left: 4px solid #21808d;
            padding: 10px;
            border-radius: 6px;
            font-size: 12px;
            color: #333;
            margin-top: 12px;
        }
        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 20px;
        }
        .btn {
            background: white;
            border: 3px solid #21808d;
            color: #21808d;
            padding: 14px 8px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            min-height: 64px;
        }
        .btn.active {
            background: #21808d;
            color: white;
        }
        .main-cards {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 16px;
        }
        .big-card {
            background: white;
            padding: 16px 12px;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
        }
        .card-title {
            font-size: 13px;
            color: #999;
            font-weight: 600;
            margin-bottom: 6px;
            text-transform: uppercase;
        }
        .card-value {
            font-size: 28px;
            font-weight: 700;
            color: #21808d;
            word-break: break-word;
        }
        .card-vita {
            border-left: 5px solid #32b8c6;
        }
        .card-vita .card-value {
            color: #32b8c6;
        }
        .card-tfr {
            border-left: 5px solid #1976d2;
        }
        .card-tfr .card-value {
            color: #1976d2;
        }
        .card-vantaggio {
            border-left: 5px solid #3ebd4d;
            background: #f0fff3;
        }
        .card-vantaggio .card-value {
            color: #3ebd4d;
        }
        .timeline {
            background: white;
            padding: 14px;
            border-radius: 12px;
            margin-bottom: 16px;
            border: 2px solid #e0e0e0;
        }
        .timeline-title {
            font-size: 14px;
            font-weight: 700;
            color: #21808d;
            margin-bottom: 12px;
        }
        .timeline-item {
            display: grid;
            grid-template-columns: 0.6fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
            padding: 8px;
            background: #f9f9f9;
            border-radius: 6px;
        }
        .timeline-val {
            font-size: 13px;
            font-weight: 700;
            color: #32b8c6;
            text-align: right;
        }
        .timeline-val.tfr {
            color: #1976d2;
        }
        .note {
            background: #e0f7fa;
            border: 2px solid #21808d;
            padding: 12px;
            border-radius: 10px;
            font-size: 12px;
            line-height: 1.4;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üßÆ VITANUOVA vs TFR</h1>
        <p>Simulatore e Calcolatore</p>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="mostraTab('simulazione', event)">üìä Simulazione</button>
        <button class="tab-btn" onclick="mostraTab('calcolatore', event)">üßÆ Calcolatore</button>
    </div>

    <div id="simulazione" class="tab-content active">
        <div class="button-group" id="buttons"></div>
        <div class="main-cards" id="info"></div>
        <div class="timeline" id="timeline"></div>
        <div class="note"><strong>‚ÑπÔ∏è Simulazione:</strong> 30 anni, Vitanuova 5%, TFR 3.375%</div>
    </div>

    <div id="calcolatore" class="tab-content">
        <div class="inputs-section">
            <div class="input-group">
                <label class="input-label">üìÖ La tua et√† attuale</label>
                <div class="input-wrapper">
                    <input type="number" id="eta" value="35" min="18" max="69">
                    <span class="input-unit">anni</span>
                </div>
                <div class="info-box">Calcoleremo fino a 70 anni (pensione)</div>
            </div>
            <div class="input-group">
                <label class="input-label">üíº Stipendio mensile NETTO</label>
                <div class="input-wrapper">
                    <input type="number" id="stipendio" value="1200" min="500" max="10000" step="100">
                    <span class="input-unit">‚Ç¨</span>
                </div>
            </div>
            <div class="input-group">
                <label class="input-label">üìà Rendimento Vitanuova</label>
                <div class="input-wrapper">
                    <input type="range" id="rendimento" value="5" min="2" max="8" step="0.5">
                </div>
                <div style="text-align: center; font-size: 12px; color: #666; margin-top: 4px;">Rendimento: <strong id="rendimento-display">5%</strong></div>
            </div>
            <div class="info-box">TFR Azienda: 3.375% annuo (fisso) ‚Ä¢ Fattore lordo: 1.35x</div>
        </div>
        <div class="main-cards" id="info-calc"></div>
        <div class="timeline" id="timeline-calc"></div>
        <div class="note"><strong>‚ÑπÔ∏è Calcolatore:</strong> Inserisci i tuoi dati e vedi i risultati in tempo reale fino ai 70 anni</div>
    </div>

    <script>
        const data = [
            {stipendio: 700, lordo: 945, tfr_anno: 783.59, tabella: [{anno: 5, vitanuova: 4323.81, tfr: 4191.51}, {anno: 10, vitanuova: 9541.95, tfr: 9139.72}, {anno: 15, vitanuova: 15925.54, tfr: 14981.24}, {anno: 20, vitanuova: 24177.89, tfr: 21877.34}, {anno: 25, vitanuova: 34894.80, tfr: 30018.40}, {anno: 30, vitanuova: 48796.02, tfr: 39629.18}]},
            {stipendio: 1200, lordo: 1620, tfr_anno: 1343.30, tabella: [{anno: 5, vitanuova: 7502.45, tfr: 7185.45}, {anno: 10, vitanuova: 16550.09, tfr: 15668.09}, {anno: 15, vitanuova: 27448.39, tfr: 25682.12}, {anno: 20, vitanuova: 41397.19, tfr: 37504.00}, {anno: 25, vitanuova: 59524.53, tfr: 51460.11}, {anno: 30, vitanuova: 83100.05, tfr: 67935.73}]},
            {stipendio: 1800, lordo: 2430, tfr_anno: 2014.96, tabella: [{anno: 5, vitanuova: 11186.16, tfr: 10778.17}, {anno: 10, vitanuova: 24825.13, tfr: 23502.14}, {anno: 15, vitanuova: 41172.59, tfr: 38523.19}, {anno: 20, vitanuova: 62114.45, tfr: 56256.01}, {anno: 25, vitanuova: 89286.80, tfr: 77190.16}, {anno: 30, vitanuova: 124650.08, tfr: 101903.59}]},
            {stipendio: 2500, lordo: 3375, tfr_anno: 2798.55, tabella: [{anno: 5, vitanuova: 15313.44, tfr: 14969.68}, {anno: 10, vitanuova: 34037.47, tfr: 32641.86}, {anno: 15, vitanuova: 56495.96, tfr: 53504.42}, {anno: 20, vitanuova: 85128.47, tfr: 78133.34}, {anno: 25, vitanuova: 122053.33, tfr: 107208.56}, {anno: 30, vitanuova: 170833.42, tfr: 141532.77}]}
        ];

        function fmt(n) {
            return n.toLocaleString('it-IT', {style:'currency', currency:'EUR', minimumFractionDigits: 0, maximumFractionDigits: 0});
        }

        function mostraTab(tab, event) {
            event.preventDefault();
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
        }

        function creaBottoni() {
            const container = document.getElementById('buttons');
            data.forEach((d, i) => {
                const btn = document.createElement('button');
                btn.className = 'btn' + (i === 1 ? ' active' : '');
                btn.innerHTML = '‚Ç¨' + d.stipendio;
                btn.onclick = () => mostraStipendio(i);
                container.appendChild(btn);
            });
        }

        function mostraStipendio(idx) {
            const d = data[idx];
            document.querySelectorAll('.btn').forEach((b, i) => {
                b.classList.toggle('active', i === idx);
            });
            const vitanuova30 = d.tabella[5].vitanuova;
            const tfr30 = d.tabella[5].tfr;
            const diff = vitanuova30 - tfr30;
            const percentuale = (diff / tfr30 * 100).toFixed(1);

            document.getElementById('info').innerHTML = `
                <div class="big-card"><div class="card-title">Stipendio lordo mensile</div><div class="card-value">${fmt(d.lordo)}</div></div>
                <div class="big-card"><div class="card-title">TFR accantonato/anno</div><div class="card-value">${fmt(d.tfr_anno)}</div></div>
                <div class="big-card card-vita"><div class="card-title">Vitanuova 30 anni</div><div class="card-value">${fmt(vitanuova30)}</div></div>
                <div class="big-card card-tfr"><div class="card-title">TFR Azienda 30 anni</div><div class="card-value">${fmt(tfr30)}</div></div>
                <div class="big-card card-vantaggio"><div class="card-title">‚úÖ TUO VANTAGGIO</div><div class="card-value">${fmt(diff)}</div><div style="font-size: 12px; color: #666; margin-top: 4px;">+${percentuale}% con Vitanuova!</div></div>
            `;

            let timelineHTML = '<div class="timeline-title">Proiezione negli anni</div>';
            d.tabella.forEach(row => {
                timelineHTML += `<div class="timeline-item"><div style="font-size: 12px; color: #999;">Anno ${row.anno}</div><div class="timeline-val">${fmt(row.vitanuova)}</div><div class="timeline-val tfr">${fmt(row.tfr)}</div></div>`;
            });
            document.getElementById('timeline').innerHTML = timelineHTML;
        }

        function calcolaCalcolatore() {
            const eta = parseInt(document.getElementById('eta').value);
            const stipendioNetto = parseInt(document.getElementById('stipendio').value);
            const rendimentoVittoria = parseFloat(document.getElementById('rendimento').value) / 100;

            const fattoreLordo = 1.35;
            const rendimentoTFR = 0.03375;
            const aliquotaTFR = 0.0691;

            const stipendioLordo = stipendioNetto * fattoreLordo;
            const tfr_annuo = (stipendioLordo * 12) * aliquotaTFR;
            const anni = 70 - eta;

            let vitanuova = 0;
            let tfr = 0;
            const proiezioni = [];

            for (let i = 1; i <= anni; i++) {
                vitanuova = vitanuova * (1 + rendimentoVittoria) + tfr_annuo;
                tfr = tfr * (1 + rendimentoTFR) + tfr_annuo;

                if (i % 5 === 0 || i === anni) {
                    proiezioni.push({anno: eta + i, vitanuova: vitanuova, tfr: tfr});
                }
            }

            document.getElementById('rendimento-display').textContent = document.getElementById('rendimento').value + '%';

            const diff = vitanuova - tfr;
            const percentuale = (diff / tfr * 100).toFixed(1);

            document.getElementById('info-calc').innerHTML = `
                <div class="big-card"><div class="card-title">Stipendio lordo mensile</div><div class="card-value">${fmt(stipendioLordo)}</div></div>
                <div class="big-card"><div class="card-title">TFR accantonato/anno</div><div class="card-value">${fmt(tfr_annuo)}</div></div>
                <div class="big-card"><div class="card-title">Anni fino a 70</div><div class="card-value">${anni}</div></div>
                <div class="big-card card-vita"><div class="card-title">Vitanuova a 70 anni</div><div class="card-value">${fmt(vitanuova)}</div></div>
                <div class="big-card card-tfr"><div class="card-title">TFR Azienda a 70 anni</div><div class="card-value">${fmt(tfr)}</div></div>
                <div class="big-card card-vantaggio"><div class="card-title">‚úÖ TUO VANTAGGIO</div><div class="card-value">${fmt(diff)}</div><div style="font-size: 12px; color: #666; margin-top: 4px;">+${percentuale}% con Vitanuova!</div></div>
            `;

            let timelineHTML = '<div class="timeline-title">Proiezione negli anni</div>';
            proiezioni.forEach(p => {
                timelineHTML += `<div class="timeline-item"><div style="font-size: 12px; color: #999;">Et√† ${p.anno}</div><div class="timeline-val">${fmt(p.vitanuova)}</div><div class="timeline-val tfr">${fmt(p.tfr)}</div></div>`;
            });

            document.getElementById('timeline-calc').innerHTML = timelineHTML;
        }

        document.getElementById('eta').addEventListener('input', calcolaCalcolatore);
        document.getElementById('stipendio').addEventListener('input', calcolaCalcolatore);
        document.getElementById('rendimento').addEventListener('input', calcolaCalcolatore);

        creaBottoni();
        mostraStipendio(1);
        calcolaCalcolatore();
    </script>
</body>
</html>
